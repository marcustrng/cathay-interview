components:
  schemas:
    Currency:
      $ref: '../schemas/currency-dto.yaml'
    ExchangeRate:
      $ref: '../schemas/exchange-rate-dto.yaml'
    OHLC:
      $ref: '../schemas/ohlc.yaml'

  responses:
    200CurrencyList:
      description: List of supported currencies
      content:
        application/json:
          schema:
            type: object
            properties:
              content:
                type: array
                description: List of currencies for the current page
                items:
                  $ref: '#/components/schemas/Currency'
              pagination:
                $ref: '../../common/common-types.yaml#/components/schemas/Pagination'
            required:
              - content
              - pagination
          example:
            $ref: ../examples/query-currency-response.json

    201CurrencyCode:
      description: If the currency has been created successfully
      content:
        application/json:
          schema:
            type: string
            pattern: '^[A-Z]{3}$'
            example: USD
          example:
            $ref: ../examples/create-currency-response.json

    200Currency:
      description: If the currency is found successfully
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Currency'
          example:
            $ref: ../examples/get-currency-by-code-response.json

    200GetExchangeRate:
      description: If the currency is found successfully
      headers:
        X-RateLimit-Limit:
          description: Request limit per hour
          schema:
            type: integer
            example: 1000
        X-RateLimit-Remaining:
          description: Remaining requests in current window
          schema:
            type: integer
            example: 999
        X-RateLimit-Reset:
          description: Unix timestamp when rate limit resets
          schema:
            type: integer
            example: 1640995200
        X-Request-ID:
          description: Unique request identifier for debugging
          schema:
            type: string
            example: req_123456789
        Cache-Control:
          description: Cache control header
          schema:
            type: string
            example: 'public, max-age=300'
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                description: List of currencies for the current page
                items:
                  $ref: '#/components/schemas/ExchangeRate'
              pagination:
                $ref: '../../common/common-types.yaml#/components/schemas/Pagination'
            example:
              $ref: ../examples/get-currency-by-code-response.json

    200SyncExchangeRate:
      description: If the currency is found successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                example: success
              message:
                type: string
                example: Exchange rates synced successfully
              pair:
                type: string
                example: USD/TWD
              period:
                type: string
                example: 2025-08-01 to 2025-08-26

    200HealthExchangeRateCheck:
      description: If the currency is found successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: string
                example: healthy
              service:
                type: string
                example: exchange-rate-sync
              timestamp:
                type: string
                format: date-time
                example: 2025-08-27T12:00:00
